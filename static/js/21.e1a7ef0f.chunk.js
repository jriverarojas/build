(this["webpackJsonppxp-ui"]=this["webpackJsonppxp-ui"]||[]).push([[21],{6704:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(70),i=a(809),o=a(650),c=a(714),s=a(702),u=a(703),d=a(694),m=a(58),p=a(241),f=a.n(p),h=a(649),b=a(779),g=a(808),E=a(34);t.default=function(){var e=Object(E.g)(),t=Object(l.a)((function(e){return{root:{},inline:{display:"inline"}}})),a=t(),n={showActions:!1,showDetail:!1,showSearch:!1,showFilter:!0,filters:[{field:"estado",value:"pendientes",icon:"alarm_on",label:"Pendientes"},{field:"estado",value:"finalizadas",icon:"alarm_on",label:"Finalizadas"},{field:"estado",value:"todas",icon:"done_all",label:"todas"},{field:"usucli.desc_persona#usudama.alias",search:!0}],columns:{render:function(t){return r.a.createElement(o.a,{button:!0,className:a.root,onClick:function(a){return n=t.id_cita,e.push("/citas/detail/"+n);var n}},r.a.createElement(u.a,null,r.a.createElement(d.a,{alt:(n=t.nombre,n.includes(" ")?n.split(" ")[0].charAt(0)+n.split(" ")[1].charAt(0):n.charAt(0)),src:"cliente"===t.cliente_dama?Object(b.b)({nameFile:t.nombre_archivo,folder:t.folder,extension:t.extension}):t.url_foto_cliente})),r.a.createElement(s.a,{id:t.id_cita,primary:t.nombre,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{component:"span",variant:"body2",color:"textPrimary"},f()(t.fecha).format("DD/MMM/YYYY")," ",f()(t.hora,"HH:mm:ss").format("hh:mm a"),r.a.createElement("br",null),r.a.createElement("strong",null,Object(b.a)(t.estado_cita))))}),r.a.createElement(c.a,null,r.a.createElement(h.a,{color:"secondary"},"chevron_right")));var n}},getDataTable:{url:"citas/Cita/listarCita",params:{start:0,sort:"cit.fecha_ultimo_estado",dir:"desc"}}};return r.a.createElement("div",{style:{height:"calc(var(--vh) - 56px)",display:"flex",flexGrow:1,position:"relative"}},r.a.createElement(i.a,{config:n,FilterComponent:g.a,heightFilter:48}))}},703:function(e,t,a){"use strict";var n=a(1),r=a(3),l=a(0),i=(a(4),a(2)),o=a(6),c=a(121),s=l.forwardRef((function(e,t){var a=e.classes,o=e.className,s=Object(r.a)(e,["classes","className"]),u=l.useContext(c.a);return l.createElement("div",Object(n.a)({className:Object(i.a)(a.root,o,"flex-start"===u.alignItems&&a.alignItemsFlexStart),ref:t},s))}));t.a=Object(o.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(s)},779:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=function(e){var t=e.nameFile,a=e.folder,n=e.extension;console.log("http");var r="";return t&&(r=(r=a).split("./../../../")[1],r="".concat("http","://").concat("pxp.vouz.me","/").concat(r).concat(t,".").concat(n)),r},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",a=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};return e?e.split(t).reduce((function(e,n){return e+a(n)+t}),""):null}},808:function(e,t,a){"use strict";var n=a(5),r=a(8),l=a(0),i=a.n(l),o=a(693),c=a(236),s=a(721),u=a(713),d=a(303),m=a(238),p=a(649),f=a(309),h=Object(f.a)((function(){return{root:{display:"flex",flexDirection:"row",alignContent:"center"},container:{width:"calc( 100% - 48px)"},tabs:{},input:{width:"calc( 100% - 48px)",paddingLeft:"10px !important"}}}));t.a=function(e){var t=e.filters,a=e.handleFilter,f=h(),b=Object(l.useState)(0),g=Object(r.a)(b,2),E=g[0],v=g[1],x=Object(l.useState)(!1),O=Object(r.a)(x,2),y=O[0],w=O[1];return Object(l.useEffect)((function(){a(t[E],!0)}),[E]),Object(l.useEffect)((function(){y||a(t[E])}),[y]),i.a.createElement(o.a,{className:f.root},!y&&i.a.createElement(c.a,{in:!y,timeout:700,className:f.container},i.a.createElement(s.a,{value:E,onChange:function(e,t){return v(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"Filters",className:f.tabs},t.filter((function(e){return!e.search})).map((function(e){return i.a.createElement(u.a,{key:e.label,label:e.label})})))),y&&i.a.createElement(c.a,{in:y,timeout:700,className:f.input},i.a.createElement(d.a,{className:f.input,placeholder:"Search",autoFocus:!0,inputProps:{"aria-label":"search"},onKeyUp:function(e){var r=t.filter((function(e){return e.search}))[0]||null;r=Object(n.a)(Object(n.a)({},r),{},{value:e.target.value}),a(r||{field:"*",value:e.target.value,criteria:"contains",search:!0})}})),i.a.createElement(m.a,{onClick:function(){w(!y)}},i.a.createElement(p.a,null,y?"close":"search")))}},809:function(e,t,a){"use strict";var n=a(35),r=a.n(n),l=a(65),i=a(5),o=a(8),c=a(0),s=a.n(c),u=a(16),d=a(188),m=a(70),p=a(464),f=a(650),h=a(700),b=a(714),g=a(702),E=a(238),v=a(654),x=a(58),O=a(869),y=a(653),w=a(652),j=a(693),k=a(298),S=a(868),C=a.n(S),F=a(953),N=function(e){var t=e.length,a=void 0===t?4:t,n=Array.from({length:a},(function(e,t){return t}));return s.a.createElement(s.a.Fragment,null,n.map((function(e,t){return s.a.createElement("div",{key:t},s.a.createElement(f.a,null,s.a.createElement(h.a,null,s.a.createElement(F.a,{variant:"circle",width:32,height:32})),s.a.createElement(g.a,{primary:s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,{display:"flex",flexWrap:"wrap"},s.a.createElement(j.a,{flexGrow:1},s.a.createElement(F.a,{variant:"text",width:"80%",animation:"wave"})),s.a.createElement(j.a,null,s.a.createElement(F.a,{variant:"rect",width:100,height:10,animation:"wave"})))),secondary:s.a.createElement(F.a,{variant:"text",width:"30%",animation:"wave"})}),s.a.createElement(b.a,null,s.a.createElement(F.a,{variant:"circle",width:32,height:32,animation:"wave"}))),s.a.createElement(y.a,null))})))},_=a(53),M=a(715),T=a(677),R=a(791),D=a.n(R),A=a(303),I=a(297),L=Object(m.a)((function(e){return{fab:{position:"fixed",top:e.spacing(12),right:e.spacing(2),float:"right",zIndex:20},inputSearch:{position:"fixed",top:e.spacing(12.7),right:e.spacing(4),float:"right",zIndex:10,border:"1px solid "+e.palette.secondary.main,background:"".concat(e.palette.background.paper),borderRadius:"20px",padding:"10px",paddingRight:"45px",paddingTop:"5px",paddingBottom:"5px",width:"300px"},slide:{}}})),B=function(e){var t=e.handleSearch,a=Object(_.a)(),n=L(),r={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},l=s.a.useState(!1),i=Object(o.a)(l,2),c=i[0],u=i[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(M.a,{key:"inherit",in:!0,timeout:r,style:{transitionDelay:"".concat(r.exit,"ms")},unmountOnExit:!0},s.a.createElement(T.a,{"aria-label":"Search",color:"secondary",variant:"round",className:n.fab,onClick:function(){return u((function(e){return!e}))}},s.a.createElement(D.a,null))),s.a.createElement(I.a,{in:c,timeout:300,direction:"left",mountOnEnter:!0,unmountOnExit:!0},s.a.createElement(A.a,{type:"text",className:n.inputSearch,onChange:function(e){return t(e.target.value)}})))},W=a(713),z=a(721),P=a(649),G=a(626),Y=Object(m.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[8]},tabOption:{minWidth:"100px"},circle:{textAlign:"center",borderRadius:"50%",width:"60px",height:"60px",border:"2px solid "+e.palette.action.disabledBackground,position:"relative"},icon:{position:"absolute",top:"50%",left:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)",fontSize:"3rem"},image:{position:"absolute",top:"50%",left:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"57px",height:"57px",borderRadius:"50%"},container:{display:"flex"},active:{minWidth:"100px","& > span > div ":{border:"2px solid "+e.palette.secondary.main}}}})),H=function(e){var t=e.filters,a=e.handleFilter,n=Y(),r=s.a.useState(0),l=Object(o.a)(r,2),i=l[0],c=l[1],u=[{value:"",icon:"format_list_bulleted",label:"Todo"}].concat(Object(d.a)(t));return s.a.createElement(G.a,{position:"static",color:"default",className:n.root},s.a.createElement(z.a,{variant:"scrollable",scrollButtons:"on",value:i,onChange:function(e,t){c(t),a(u[t])},textColor:"secondary"},u.map((function(e,t){return s.a.createElement(W.a,{key:t,value:t,className:i===t?n.active:n.tabOption,label:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:n.circle},e.image&&s.a.createElement("img",{src:e.image,className:n.image,alt:"filter option"}),e.icon&&!e.image&&s.a.createElement(P.a,{className:n.icon},e.icon)),s.a.createElement("span",null,e.label))})}))))},J=a(240),K=a(75),U=a.n(K),V={showActions:!0,showDetail:!0,showSearch:!1,showFilter:!0,filters:[],columns:{primary:{field:"num_tramite",renderOption:function(e){return s.a.createElement("div",null,"Render")}},secondary:{field:"desc_funcionario",renderOption:function(e){return s.a.createElement("div",null,"Render")}},terciary:{field:"importe_total",text:"Total",level:3,renderOption:function(e){return s.a.createElement("div",null,"Render")}},detail:[{field:"rowField",text:"rowFieldText"}]}},q=Object(m.a)((function(e){return{root:{position:"relative",width:"100%"},title:{margin:e.spacing(4,0,2)},drawer:{backgroundColor:e.palette.grey[800],color:e.palette.common.white},list:{marginTop:"8px",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[8],paddingTop:0,paddingBottom:0},inline:{display:"inline"},detail:{margin:0,backgroundColor:e.palette.background.dark},detailTitle:{backgroundColor:e.palette.background.dark,color:e.palette.text.textPrimary,padding:"5px",textAlign:"right",border:"1px solid "+e.palette.action.disabledBackground},detailText:{backgroundColor:e.palette.background.paper,padding:"5px",border:"1px solid "+e.palette.action.disabledBackground}}})),X=[{icon:s.a.createElement(O.Edit,null),name:"Editar",action:function(){return alert("ok")}},{icon:s.a.createElement(O.Delete,null),name:"Eliminar",action:function(){return alert("ok")}}],Q=function(e){var t,a=e.data,n=void 0===a?[]:a,r=e.actions,l=void 0===r?[]:r,c=e.config,m=void 0===c?{}:c,S=e.FilterComponent,F=void 0===S?H:S,_=e.heightFilter,M=void 0===_?96:_,T=Object(i.a)(Object(i.a)({},V),m),R=[].concat(X,Object(d.a)(l)),D=T.columns||{},A=q(),I=s.a.useState({top:!1,left:!1,bottom:!1,right:!1}),L=Object(o.a)(I,2),W=L[0],z=L[1],P=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&z(Object(i.a)(Object(i.a)({},W),{},Object(u.a)({},e,t)))}},G=U.a.debounce((function(e){m.onSearch(e)}),500),Y=U.a.debounce((function(e){m.onSearch(e)}),500);return s.a.createElement("div",{className:A.root},T.showSearch&&s.a.createElement(B,{handleSearch:G}),T.showFilter&&s.a.createElement(F,{filters:T.filters,handleFilter:Y}),s.a.createElement(J.Scrollbars,{autoHide:!0,renderView:function(e){return s.a.createElement("div",Object.assign({},e,{style:Object(i.a)(Object(i.a)({},e.style),{},{overflowX:"hidden",marginBottom:0})}))},style:{height:"calc(100% - ".concat(T.showFilter?M:0,"px)")}},s.a.createElement(p.a,{dense:!0,className:A.list},s.a.createElement(y.a,null),n&&0===n.length&&T.infiniteScroll.hasMore&&s.a.createElement(N,{length:5}),n&&0===n.length&&!T.infiniteScroll.hasMore&&s.a.createElement("h3",null,"No items to show..."),s.a.createElement(C.a,{useWindow:!1,pageStart:0,initialLoad:!1,getScrollParent:function(){return m.infiniteScroll.parent},loadMore:m.infiniteScroll.onLoadMore,hasMore:m.infiniteScroll.hasMore,loader:s.a.createElement(N,{length:1,key:0})},n&&n.length>0&&n.map((function(e,t){return s.a.createElement("div",{key:t},T.columns.render&&T.columns.render(e),!T.columns.render&&s.a.createElement(f.a,{button:!0,onClick:function(){return function(e,t){T.showDetail&&z(Object(i.a)(Object(i.a)({},W),{},Object(u.a)({},e,!W[e]))),T.handleOnClick&&T.handleOnClick(t)}(t,e)}},T.showDetail&&s.a.createElement(h.a,null,W[t]?s.a.createElement(O.ExpandLess,null):s.a.createElement(O.ExpandMore,null)),s.a.createElement(g.a,{primary:s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,{display:"flex",flexWrap:"wrap"},s.a.createElement(j.a,{flexGrow:1},D.primary.renderOption&&D.primary.renderOption(e),!D.primary.renderOption&&s.a.createElement(x.a,{component:"span",variant:"subtitle1",className:A.inline,color:"inherit"},e[D.primary.field])),s.a.createElement(j.a,null,D.terciary.renderOption&&D.terciary.renderOption(e),!D.terciary.renderOption&&s.a.createElement(x.a,{component:"span",variant:"overline",color:"secondary"},s.a.createElement("b",null,D.terciary.text,":\xa0"),e[D.terciary.field])))),secondary:s.a.createElement(s.a.Fragment,null,D.secondary.renderOption&&D.secondary.renderOption(e),!D.secondary.renderOption&&s.a.createElement(x.a,{component:"span",variant:"caption",className:A.inline,color:"primary"},e[D.secondary.field]))}),T.showActions&&s.a.createElement(b.a,null,s.a.createElement(E.a,{edge:"end","aria-label":"options",color:"primary",onClick:P("bottom",!0)},s.a.createElement(O.MoreVert,null)))),s.a.createElement(k.a,{in:W[t],timeout:"auto",unmountOnExit:!0},s.a.createElement(v.a,{container:!0,spacing:0,className:A.detail},!D.detailRender&&D.detail&&D.detail.map((function(t,a){return s.a.createElement(s.a.Fragment,{key:a},s.a.createElement(v.a,{item:!0,xs:4,sm:3,md:2,xl:1,className:A.detailTitle},s.a.createElement("b",null,t.text)),s.a.createElement(v.a,{item:!0,xs:8,sm:9,md:4,xl:3,className:A.detailText},e[t.field]))})),D.detailRender&&D.detailRender(e))),s.a.createElement(y.a,null))}))))),s.a.createElement(w.a,{anchor:"bottom",open:W.bottom,onClose:P("bottom",!1)},(t="bottom",s.a.createElement("div",{className:A.fullList,role:"presentation",onClick:P(t,!1),onKeyDown:P(t,!1)},s.a.createElement(p.a,{className:A.drawer,dense:!0},R&&R.map((function(e,t){return s.a.createElement(f.a,{button:!0,key:e.name,onClick:e.action},s.a.createElement(h.a,{color:"danger"},e.icon),s.a.createElement(g.a,{primary:e.name}))})))))))},Z=a(7);t.a=function(e){var t=e.config,a=e.FilterComponent,n=e.heightFilter,u=Object(c.useState)({data:[],hasMore:!0,limit:12,total:9999}),d=Object(o.a)(u,2),m=d[0],p=d[1],f=t.showFilter?-1:0,h=Object(c.useState)(f),b=Object(o.a)(h,2),g=b[0],E=b[1],v=Object(c.useState)(""),x=Object(o.a)(v,2),O=x[0],y=x[1],w={hasMore:m.hasMore,parent:document.getElementById("content"),onLoadMore:function(e){E(e*m.limit)}};t.infiniteScroll=w,t.onSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};console.log("FILTER: ",e),e&&!0===e.search?(t.bottom_filter_fields=[e.field].join(),t.bottom_filter_value=e.value):e&&(t[e.field]=e.value),p((function(e){return Object(i.a)(Object(i.a)({},e),{},{total:9999,hasMore:!0,data:[],filter:t})})),-1===g?E(0):y(e.value)};var j=t.getDataTable.params||{},k=function(){var e=Object(l.a)(r.a.mark((function e(){var a,n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.total>m.data.length)){e.next=7;break}return e.next=3,Z.a.apiClient.doRequest({url:t.getDataTable.url,params:Object(i.a)({start:g,limit:j.limit||50,sort:j.sort||"",dir:j.dir||"ASC",contenedor:j.contenedor||""},m.filter)});case 3:(a=e.sent)&&a.datos&&(a.datos.forEach((function(e){return m.data.push(e)})),n=m.data.length,l=!!(n<parseInt(a.total)&&"0"!==a.total),p((function(e){return Object(i.a)(Object(i.a)({},e),{},{total:parseInt(a.total),hasMore:l,data:0===m.start?a.datos:e.data})}))),e.next=8;break;case 7:p((function(e){return Object(i.a)(Object(i.a)({},e),{},{hasMore:!1})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){m.hasMore&&k()}),[g,O]),s.a.createElement(Q,{data:m.data,config:t,FilterComponent:a,heightFilter:n})}}}]);
//# sourceMappingURL=21.e1a7ef0f.chunk.js.map
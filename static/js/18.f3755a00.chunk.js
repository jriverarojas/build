(this["webpackJsonppxp-ui"]=this["webpackJsonppxp-ui"]||[]).push([[18],{6710:function(e,a,t){"use strict";t.r(a);var n=t(5),r=t(8),o=t(0),l=t.n(o),i=t(759),c=t(122),s=t(773),d=t(882),u=t(84),m=function(e){return l.a.createElement(u.a,Object.assign({},e,{viewBox:"0 0 50 50"}),l.a.createElement("path",{d:"M 11 3 A 1.0001 1.0001 0 0 0 10 4 L 10 8 L 9 8 A 1.0001 1.0001 0 0 0 8 9 L 8 13 L 7 13 A 1.0001 1.0001 0 0 0 6 14 L 6 29 L 4 29 A 1.0001 1.0001 0 0 0 3 30 L 3 46 A 1.0001 1.0001 0 0 0 4 47 L 46 47 A 1.0001 1.0001 0 0 0 47 46 L 47 30 A 1.0001 1.0001 0 0 0 46 29 L 44 29 L 44 14 A 1.0001 1.0001 0 0 0 43 13 L 42 13 L 42 9 A 1.0001 1.0001 0 0 0 41 8 L 40 8 L 40 4 A 1.0001 1.0001 0 0 0 39 3 L 11 3 z M 12 5 L 38 5 L 38 8 L 12 8 L 12 5 z M 10 10 L 10.832031 10 A 1.0001 1.0001 0 0 0 11.158203 10 L 38.832031 10 A 1.0001 1.0001 0 0 0 39.158203 10 L 40 10 L 40 13 L 10 13 L 10 10 z M 8 15 L 8.8320312 15 A 1.0001 1.0001 0 0 0 9.1582031 15 L 40.832031 15 A 1.0001 1.0001 0 0 0 41.158203 15 L 42 15 L 42 29 L 31 29 A 1.0001 1.0001 0 0 0 30 30 C 30 32.773666 27.773666 35 25 35 C 22.226334 35 20 32.773666 20 30 A 1.0001 1.0001 0 0 0 19 29 L 8 29 L 8 15 z M 5 31 L 18.203125 31 C 18.709475 34.363146 21.49988 37 25 37 C 28.50012 37 31.290525 34.363146 31.796875 31 L 45 31 L 45 45 L 5 45 L 5 31 z"}))},p=t(834),b=t(883),f=t(7),h=t(39);a.default=function(){var e=Object(c.b)().enqueueSnackbar,a=Object(o.useState)(!1),t=Object(r.a)(a,2),u=t[0],C=t[1],E=Object(o.useRef)(),L=Object(o.useState)({open:!1,table:"example.tdata_example",idTableDesc:"id_data_example",idTable:void 0,typeChat:"CHAT_DATA_EXAMPLE",idChat:void 0}),j=Object(r.a)(L,2),v=j[0],_=j[1],g={nameForm:"Formulario Example chat",columns:{desc_example:{type:"TextField",initialValue:"",label:"Desc Example",gridForm:{xs:12,sm:12}}},getDataTable:{url:"example/DataExample/listarDataExampleChat",params:{start:"0",limit:"10",sort:"id_data_example",dir:"desc"}},idStore:"id_data_example",buttonDel:!0,buttonNew:!0,actionsTableCell:{buttonDel:!1,buttonEdit:!1,extraButtons:{createChat:{label:"Create Chat",buttonIcon:l.a.createElement(m,null),onClick:function(a){!function(a){f.a.apiClient.doRequest({url:"parametros/Chat/insertarChat",params:{id_tabla:a.id_data_example,codigo_tipo_chat:"CHAT_DATA_EXAMPLE",descripcion:"CHAT_DATA_EXAMPLE: chat example",estado_reg:""}}).then((function(a){C(!1),e(a.detail.message,{variant:a.error?"error":"success"}),E.current.handleRefresh()}))}(a)}},chat:{label:"example Chat",buttonIcon:l.a.createElement(m,null),onClick:function(e){!function(e){var a=e.idTable,t=e.idChat;_((function(e){return Object(n.a)(Object(n.a)({},e),{},{idTable:a,idChat:t,open:!0,idComponent:Object(i.a)()})}))}({idTable:e.id_tipo_chat,idChat:e.id_chat})}}}},resetButton:!0,onSubmit:{url:"example/DataExample/insertarDataExample"},urlDelete:"example/DataExample/eliminarDataExample",onClickRow:function(e){var a=e.row,t=e.statesButtonsTableCell;a.id_chat?(t.chat.enable(),t.createChat.disable()):(t.chat.disable(),t.createChat.enable())}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,null,l.a.createElement(d.a,{dataConfig:g,ref:E})),l.a.createElement(p.a,{titleToolbar:"Chat",onClose:function(){_(Object(n.a)(Object(n.a)({},v),{},{open:!1}))},open:v.open},l.a.createElement(b.a,{table:v.table,idTable:v.idTable,idTableDesc:v.idTableDesc,typeChat:v.typeChat,idComponent:v.idComponent,idChat:v.idChat})),u&&l.a.createElement(h.a,null))}},774:function(e,a,t){"use strict";var n=t(27);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),o=(0,n(t(54)).default)(r.default.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");a.default=o},813:function(e,a,t){"use strict";var n=t(0),r=t(86);a.a=Object(r.a)(n.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},814:function(e,a,t){"use strict";var n=t(0),r=t(86);a.a=Object(r.a)(n.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},834:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(626),l=t(466),i=t(238),c=t(325),s=t.n(c),d=t(58),u=t(471),m=t(120),p=t.n(m),b=t(297),f=p()((function(e){return{root:{width:"100%"},paper:{width:"100%"},table:{minWidth:750},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),h=r.a.forwardRef((function(e,a){return r.a.createElement(b.a,Object.assign({direction:"right",ref:a},e))}));a.a=function(e){var a=e.children,t=(e.transition,e.fullScreen,e.fullWidth,e.iconToolbar,e.titleToolbar),n=e.open,c=e.onClose,m=f();return r.a.createElement(u.a,{fullScreen:!0,open:n,onClose:c,TransitionComponent:h},r.a.createElement(o.a,{className:m.appBar},r.a.createElement(l.a,null,r.a.createElement(i.a,{edge:"start",color:"inherit",onClick:c,"aria-label":"close"},r.a.createElement(s.a,null)),r.a.createElement(d.a,{variant:"h6",className:m.title},t))),a)}},883:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(120),l=t.n(o),i=t(5),c=t(8),s=t(653),d=t(693),u=t(101),m=t(240),p=t(759),b=t(186),f=t(2),h=t(70),C=t(694),E=t(58),L=t(241),j=t.n(L),v=Object(h.a)((function(e){return{root:{marginBottom:e.spacing(2),display:"flex",paddingRight:"10px",paddingLeft:"10px"},avatar:{height:32,width:32},image:{cursor:"pointer",height:"auto",maxWidth:"100%",width:380}}}));var _=function(e){var a=e.className,t=e.avatar,n=e.user,o=e.userNameFrom,l=e.idFrom,i=e.message,c=e.date,s=Object(b.a)(e,["className","avatar","user","userNameFrom","idFrom","message","date"]),u=v();return c||new Date,r.a.createElement("div",Object.assign({className:Object(f.a)(u.root,a)},s),r.a.createElement(d.a,{display:"flex",maxWidth:500,ml:n===l?"auto":0},r.a.createElement(C.a,{className:u.avatar,src:t}),r.a.createElement(d.a,{ml:2},r.a.createElement(d.a,{bgcolor:n===l?"secondary.main":"background.default",color:n===l?"secondary.contrastText":"text.primary",py:1,px:2,borderRadius:"borderRadius",boxShadow:1},r.a.createElement(E.a,{color:"inherit",variant:"h6"},o),r.a.createElement(d.a,{mt:1},r.a.createElement(E.a,{color:"inherit",variant:"body1",style:{whiteSpace:"pre-wrap",wordBreak:"break-all"}},i))),r.a.createElement(d.a,{mt:1,display:"flex",justifyContent:"flex-end"},r.a.createElement(E.a,{noWrap:!0,color:"textSecondary",variant:"caption"},j()(c).fromNow())))))},g=(t(19),t(122),t(107)),x=t(302),O=t(627),A=t(238),T=t(84),w=function(e){return r.a.createElement(T.a,Object.assign({},e,{viewBox:"0 0 50 50"}),r.a.createElement("path",{d:"M 48.90625 0 C 48.773438 0.015625 48.648438 0.0585938 48.53125 0.125 L 0.53125 26.125 C 0.183594 26.3125 -0.0195313 26.6875 0.0117188 27.082031 C 0.046875 27.476563 0.3125 27.8125 0.6875 27.9375 L 14.3125 32.40625 L 13 45.90625 C 12.945313 46.34375 13.1875 46.765625 13.59375 46.941406 C 14 47.117188 14.472656 47 14.75 46.65625 L 23.34375 36.9375 L 36.3125 49.71875 C 36.566406 49.96875 36.933594 50.0625 37.277344 49.964844 C 37.621094 49.867188 37.882813 49.597656 37.96875 49.25 L 49.96875 1.25 C 50.058594 0.933594 49.980469 0.59375 49.769531 0.34375 C 49.554688 0.09375 49.234375 -0.0351563 48.90625 0 Z M 47.46875 2.9375 L 36.4375 47.0625 L 24.59375 35.375 L 41.8125 11.59375 C 42.191406 11.195313 42.179688 10.566406 41.78125 10.1875 C 41.382813 9.808594 40.753906 9.820313 40.375 10.21875 L 15.21875 30.59375 L 3.5 26.78125 Z M 35.78125 16.5 L 22.65625 34.71875 C 22.621094 34.757813 22.589844 34.800781 22.5625 34.84375 L 22.5 34.90625 C 22.476563 34.9375 22.457031 34.96875 22.4375 35 L 15.28125 43.03125 L 16.34375 32.21875 Z"}))},y=Object(h.a)((function(e){return{root:{backgroundColor:e.palette.background.default,display:"flex",alignItems:"center",padding:e.spacing(1,2)},divider:{width:1,height:24},fileInput:{display:"none"}}}));var k=function(e){var a=e.className,t=e.disabled,o=(e.thread,e.onAdd,e.eventWs,e.handleSend),l=Object(b.a)(e,["className","disabled","thread","onAdd","eventWs","handleSend"]),i=y(),u=Object(n.useState)(""),m=Object(c.a)(u,2),p=m[0],h=m[1],C=function(){h("")};return r.a.createElement("div",Object.assign({className:Object(f.a)(i.root,a)},l),r.a.createElement(g.a,{variant:"outlined",component:d.a,flexGrow:1,ml:2,p:1},r.a.createElement(x.a,{className:i.input,disableUnderline:!0,fullWidth:!0,value:p,onChange:function(e){e.persist(),h(e.target.value)},onKeyUp:function(e){13===e.keyCode&&o(p,C)},placeholder:"Leave a message"})),r.a.createElement(O.a,{title:"Send"},r.a.createElement("span",null,r.a.createElement(A.a,{color:"secondary",disabled:!p||t,onClick:function(){return o(p,C)}},r.a.createElement(w,{fontSize:"small"})))),r.a.createElement(s.a,{className:i.divider}))},D=t(189),M=t(7),S=l()((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",backgroundColor:e.palette.background.dark}}})),N=function(e){var a=e.eventWs,t=e.idChat,o=e.idComponent,l=S(),b=Object(n.useRef)(null),f=Object(n.useState)(),h=Object(c.a)(f,2),C=h[0],E=h[1],L={url:"parametros/Mensaje/listarMensaje",params:{start:"0",limit:"10000",sort:"id_mensaje",dir:"asc",id_chat:t}},j=Object(D.a)(L),v=j.data,g=j.setData;Object(n.useEffect)((function(){console.log("data",v),v&&b.current.scrollToBottom(0)}),[v]),Object(n.useEffect)((function(){E(M.a.apiClient._authenticated.id_usuario),Object(u.d)({event:a,idComponent:o,handle:function(e){!function(e){console.log(e),g((function(a){if(a)return Object(i.a)(Object(i.a)({},a),{},{datos:a.datos.concat([{id_mensaje:Object(p.a)(),id_usuario_from:e.from.idUser,user_name_from:e.from.user,mensaje:e.mensaje}])})})),b.current.scrollToBottom(0)}(e)}})}),[]),Object(n.useEffect)((function(){return function(){console.log("desmontar"),Object(u.b)({idComponent:o,event:a})}}),[]);return r.a.createElement("div",{className:l.root},r.a.createElement(s.a,null),r.a.createElement(d.a,{flexGrow:1,p:2,ref:b,component:m.Scrollbars,options:{suppressScrollX:!0}},v&&v.datos.map((function(e){return r.a.createElement(_,{key:e.id_mensaje,user:C,userNameFrom:e.user_name_from,idFrom:e.id_usuario_from,message:e.mensaje,date:e.fecha_reg})}))),r.a.createElement(k,{eventWs:a,handleSend:function(e,n){""!==e&&(g((function(a){if(a)return Object(i.a)(Object(i.a)({},a),{},{datos:a.datos.concat([{id_mensaje:Object(p.a)(),id_usuario_from:C,user_name_from:M.a.apiClient._authenticated.nombre_usuario,mensaje:e}])})})),function(e,a){M.a.apiClient.doRequest({url:"parametros/Mensaje/insertarMensaje",params:{id_chat:t,mensaje:e}}).then((function(e){a()}))}(e,(function(){console.log("msg has sent")})),Object(u.c)({event:a,msg:e}),setTimeout((function(){b.current.scrollToBottom(0)}),100),n())}}))},B=l()((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",display:"flex",overflow:"hidden",position:"relative",width:"100%"}}}));a.a=function(e){e.table;var a=e.idTable,t=e.idTableDesc,n=e.typeChat,o=e.idChat,l=e.idComponent,i=B(),c="".concat(n,"_").concat(t,"_").concat(a,"_").concat(o);return r.a.createElement("div",{className:i.root},r.a.createElement(N,{eventWs:c,idChat:o,idComponent:l}))}}}]);
//# sourceMappingURL=18.f3755a00.chunk.js.map